<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="http://www.quantisan.com/theme/css/style.css">
    <link rel="stylesheet" type="text/css" href="http://www.quantisan.com/theme/css/pygments.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300|Inconsolata' rel='stylesheet' type='text/css'>
	<link href="http://www.quantisan.com/" type="application/atom+xml" rel="alternate" title="Quantitative Artisan ATOM Feed" />


        <title>Quantitative Artisan</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Paul Lam">
</head>

<body>
    <section id="navbar">
        <div class="user_meta">
            <h1 id="user"><a href="http://www.quantisan.com" class="">Paul Lam</a></h1>
            <h2>Data. Engineering. Startup.</h2>
        </div>
        <div class="nav-button">
            <ul>
                                    <li><a href="http://www.quantisan.com/about/">About</a></li>
                            <li><a href="mailto:paul@quantisan.com">Email</a></li>
                            <li><a href="http://www.twitter.com/Quantisan">Twitter</a></li>
                            <li><a href="http://www.github.com/Quantisan">Github</a></li>
                            <li><a href="http://www.linkedin.com/in/paullam">LinkedIn</a></li>
                            <li><a href="http://feeds.feedburner.com/Quantisan">Subscribe</a></li>
             </ul>
         </div>
     </section>

     <section id="sidebar">
        <img src="/images/profile_circle.png" id="logo" alt="logo">

        <div class="user_meta">
            <h1 id="user"><a href="http://www.quantisan.com" class="">Paul Lam</a></h1>
            <h2>Data. Engineering. Startup.</h2>
            <ul>
                        <li><a href="http://www.quantisan.com/about/">About</a></li>
                        <li><a href="mailto:paul@quantisan.com">Email</a></li>
                        <li><a href="http://www.twitter.com/Quantisan">Twitter</a></li>
                        <li><a href="http://www.github.com/Quantisan">Github</a></li>
                        <li><a href="http://www.linkedin.com/in/paullam">LinkedIn</a></li>
                        <li><a href="http://feeds.feedburner.com/Quantisan">Subscribe</a></li>
            </ul>
        </div>
        <footer>
            <address>
                Powered by <a href='http://docs.getpelican.com/en/latest/'>Pelican</a>,
                <a href='https://github.com/jamescooke/pelican-svbtle#readme'>theme info</a>.
            </address>
        </footer>
    </section>

    <section id="posts">
	
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/maximal-frustration-in-printing-and-parsing-milliseconds-in-r/" rel='bookmark'>Maximal frustration in printing and parsing milliseconds in R</a>
            </h1>
            <div class="article-content"> <p>I've just spent an absurd amount of time figuring out how to parse
millisecond times into R. (It's standard practice to timestamp tick data
with milliseconds timing in a flat data file.) Turns out that there are
two problems that I faced. One being that there is a almost-hidden,
footnote option in the <a href="http://stat.ethz.ch/R-manual/R-devel/library/base/html/strptime.html">strptime( ) function</a> (for converting
characters to POSIX) in which it describes using <code>format = "%H:%M%OS"</code>
instead of <code>"%H:%M:%S"</code> to parse fractional seconds. However, the second,
and what's actually the one that's wasted much my time, is the fact that
R <strong>ignores</strong> milliseconds in printing by default! For example, here's
an output for the POSIXct representation of the integer value
1286564400.</p>
<div class="highlight"><pre><span class="s">&quot;2010-10-08 15:00:00 EDT&quot;</span>
</pre></div>


<p>So even though I figured how to represent millisecond times in R a few
hours ago, I never knew I did it simply because R is not printing the
output that I wanted on screen every time I tried! After a couple hours
of searching, trying, and frustrating, here's the one-liner command that
solved my problem.</p>
<div class="highlight"><pre><span class="n">options</span><span class="p">(</span><span class="n">digits</span><span class="p">.</span><span class="n">secs</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>


<p>which changes the options of the display and thus I can see the
following output from the same input as above.</p>
<div class="highlight"><pre><span class="s">&quot;2010-10-08 15:00:00.344 EDT&quot;</span>
</pre></div>


<p>I guess that's why they say <a href="http://blog.revolutionanalytics.com/2010/06/learning-r.html">R has a steep learning curve</a>! Yes, it is
very powerful and flexible. But there are limited standards and the
documentations are all over the place because it's a mish mash of
user-contributed packages!</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/maximal-frustration-in-printing-and-parsing-milliseconds-in-r/' title='2010-10-08T15:32:00'>08 October 2010</a> in <a href="http://www.quantisan.com/category/algorithmic-trading/">algorithmic-trading</a>.              
            </div>
        </article>
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/data-analysis-with-r-using-the-right-tool-for-the-right-task/" rel='bookmark'>Data analysis with R: Using the right tool for the right task</a>
            </h1>
            <div class="article-content"> <p>I ported <a href="http://engineering-returns.com/tsi/">Engineering Return's Trend Strength Index</a> to JForex as my
first practice to writing custom indicators in JForex. Frank's code in
TradeSignal consists of 9 lines. My JForex code? 191. This is my first
custom indicator in JForex. It will also be the last. A compiled
programming language such as Java is not the most convenient to use for
data analysis. The lack of interactivity because of the step of
compilation is one obstacle to fluent data explorations. Secondly, the
language itself is more cumbersome because of its generality. Java is
used to build all sorts of applications. Contrary to something like
MatLab, in which it is purposely built to work with numbers. I miss <a href="http://www.quantisan.com/starting-to-use-matlab-for-quantitative-finance/">the
days when I have my license for MatLab</a>. However, being forced away
from MatLab might not be a bad thing. As much as I've become accustomed
to it, MatLab isn't without its flaws. But I won't bash it in this post.
What I actually want to talk about is R. The rage these days in
statistical data analysis is in R (see <a href="http://en.wikipedia.org/wiki/R_%28programming_language%29">Wiki entry on R</a>). I've done
some research and testing, R is really as good as they say it is (see
past publications in <a href="http://www.rinfinance.com/">R/Finance conference</a><a href="http://probability.ca/cran/doc/contrib/Farnsworth-EconometricsInR.pdf"></a>). You will get to see
some real examples in financial time series data analysis in R later in
this blog once I have some publishable results. This will no doubt take
some time as I am learning yet another new programming language (thus
the lack of posts this week). The plan from now on is to use R to play
with the data. Then once the algorithm is finalized, I will either port
it to Java (JForex) for deployment or <a href="http://www.rforge.net/rJava/">embed the R environment in
Java</a> for live trading.</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/data-analysis-with-r-using-the-right-tool-for-the-right-task/' title='2010-10-06T05:58:00'>06 October 2010</a> in <a href="http://www.quantisan.com/category/algorithmic-trading/">algorithmic-trading</a>.              
            </div>
        </article>
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/third-quarter-2010-trading-review/" rel='bookmark'>Third Quarter 2010 Trading Review</a>
            </h1>
            <div class="article-content"> <p>Markets hitched a one-way train in the third quarter. TSX opened in July
at 11200. It closed September at 12368. A whopping 10% jump in three
months! S&amp;P500 made a similarly impressive 9.7% jump. We simply don't
get 10% moves even in most <em>years</em>. I made fewer trades this quarter but
held each one for longer to ride the trend. However, I am not as
successful as I'd hope. In particular, my worst trade this quarter was
in <a href="http://www.quantisan.com/tag/ven.to/">Ventana Gold</a> (VEN.TO). The position <a href="http://www.quantisan.com/sold-350-ven-to-10-50-profit-0-8-re-bought-250-ven-to-10-67/">was profitable</a>, but the
money made was only a quarter as what I should have made. I was too
aggressive to go long when <a href="http://www.quantisan.com/sold-400-ven-to-10-70-breakeven/">VEN.TO was heading into a brick wall</a>.
Ironically, my best trade this quarter was one that didn't make money.
In hindsight, I was wrong in the direction of a position but managed to
<a href="http://www.quantisan.com/sold-4-mfc-11jan-puts-14-00-1-74-mark-12-96-loss-0-1/">escape with just a scratch</a>. If I had been stubborn in <a href="http://www.quantisan.com/bought-4-mfc-jan-2010-puts-14-00-1-70-mark-13-25/">this failed
Manulife short</a>, my profit this quarter would have been wiped out. It
was a close call (technically, it was a put contract). It looks as
though I did <a href="http://www.quantisan.com/a-whole-year-two-hundred-and-six-posts-later/">learn something in the past year</a>. My main focus this
quarter has been the backend of my trading work. Namely in <a href="http://www.quantisan.com/category/quantitative-finance/">quantitative
finance study and development</a>. My automated strategy performed well
in the <a href="http://www.dukascopy.com/ibentry.php?ibref=1143/">Dukascopy</a> JForex contest. I won sixth place in July and first
place in August. My win streak (I also won in April) garnered the
attention from the people at Dukascopy and they kindly invited me to the
<a href="http://www.quantisan.com/my-interview-at-dukascopy-in-geneva/">Geneva Forex Event for a TV interview</a>. By far the most impressive
thing that happened to me this quarter was <a href="../pictures-from-geneva/">this trip to Geneva</a>.
<strong>Quarterly Metric Q3 Q2</strong> Sarting Fund \$9,404.87 \$8,000.00 End of
Quarter Fund \$9,630.75 \$9,404.87 Total Net Profit \$225.88 \$1,404.87
Gross Profit \$381 \$1,800 Gross Loss -\$155 -\$395 Profit Factor 2.45
4.56 Net Profit % 2.40% 17.56% Max. Drawdown % 0.85% 3.36% Total
Commission 121.1 \$155.1 Commission / Net Return 53.61% 11.04% I've said
this in the last quarter, <a href="http://www.quantisan.com/june-and-second-quarter-2010-trading-review/">commissions are the bane of my trading</a>.
Last quarter it took away 11% of my total return. This time it's 54%!
The structure of my equities commission requires that I trade less but
punch hard. This isn't my style. My intention is to trade less by being
more picky in my RRSP trading account. The 0.85% max. drawdown this
quarter is impressive though. I sometimes lose more than that in a
single position. Sterling Ratio 0.22 1.44 Excess Return 2.29% 17.46%
SDev Return per Trade 1.01% 2.21% Kurtosis 1.89 -0.93 Skewness 1.65 0.72
Despite my modest 2.4% return this quarter, it's not a good number in
light of the market liftoff. My low <a href="http://www.quantisan.com/analysing-monthly-forex-trading-performance-in-changing-market-conditions/">modified Sterling Ratio</a> says so.
On the other hand, the statistics from my trades improved. I achieved
consistency by lowering the standard deviation of my trades and skewed
my trade returns more to the positive. Yet another thing to caution is
my high kurtosis value. Which means my total returns are due to big
profits from a couple of trades. Other than these, there is not much to
add about the rest of the data. 95th Percentile P&amp;L \$193.49 \$421.15
5th Percentile P&amp;L -\$50.37 -\$102.13 Net Profit Mid 90% Only -\$60.56
\$824.07 Total # of Trades 9 14 Percent Profitable 28.57% 61.54% # of
Winning Trades 2 8 # of Losing Trades 5 5 # of Break-even Trades 2 1
Average Trade Profit % 0.27% 1.18% Average Winning % 2.01% 2.59% Average
Losing % -0.32% -0.83% Ratio Win% / Loss% 6.25 3.12 Max. Conseq. Winners
3 5 Max. Conseq. Losers 3 3 Largest Winning Trade \$228.25 \$464.05
Largest Losing Trade -\$58.19 -\$116.75 Avg. Time Held [days] 8.30 5.17</p>
<h2>Goal for the Fourth Quarter</h2>
<p>My <a href="http://www.quantisan.com/june-and-second-quarter-2010-trading-review/">goal from the previous quarter</a> is to learn and build my first indicator in JForex. I achieved
that just this week. However, I plan to change direction in my work by
using less JForex and using more custom tools. My goal for the next
quarter is to learn R programming and
<span style="text-decoration: line-through;">implement a JForex to R
data exchange system</span> (done, good old CSV files).</p>
</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/third-quarter-2010-trading-review/' title='2010-10-01T10:11:00'>01 October 2010</a> in <a href="http://www.quantisan.com/category/trading/">trading</a>.              
            </div>
        </article>
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/sold-400-vento-1070-breakeven/" rel='bookmark'>Sold 400 VEN.TO @ 10.70, Breakeven</a>
            </h1>
            <div class="article-content"> <p>I'm out all my <a href="http://www.quantisan.com/sold-350-ven-to-10-50-profit-0-8-re-bought-250-ven-to-10-67/">Ventana Gold (VEN.TO) position</a>. This thing is losing
steam despite gold prices hitting record high seemingly on a daily
basis. VEN.TO made another attempt to break \$11.00 resistance level at
the open but it quickly reversed (Figure 1). I upped my stop order at
the open on this third attempt because I don't want to be holding it if
it fails for the third time. I'll just sit and wait for a while to see
how this one goes. Recent low at \$10.40 is the support to watch.
Coincidentally, the 50 daily MA just crossed over the 200 MA today for a
classic bullish signal (Fig. 2). A contrarian correction (downward) to
bleed off overbought condition is in play, perhaps?</p>
<p>[caption id="" align="aligncenter" width="570" caption="Ventana Gold
(VEN.TO) intraday"][<img alt="" src="http://www.quantisan.com/static/images/img_archive/2010-09-30-VEN.TO-intra.gif" />][][/caption] [caption id=""
align="aligncenter" width="570" caption="Ventana Gold (VEN.TO)
daily"][<img alt="" src="http://www.quantisan.com/static/images/img_archive/2010-09-30-VEN.TO.png" />]<a href="http://www.quantisan.com/static/images/img_archive/2010-09-30-VEN.TO.png">1</a>[/caption] Loss is (\$10.70 - \$10.70) * 400 = \$0 -
\$14.85 commission = -\$14.85 = 0.15% of account. I am just handing
money over to my discount broker <a href="http://www.quantisan.com/questrade/">Questrade</a> these days.</p>
</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/sold-400-vento-1070-breakeven/' title='2010-09-30T11:19:00'>30 September 2010</a> in <a href="http://www.quantisan.com/category/stocks/">stocks</a>.              
            </div>
        </article>
<p class="paginator">
		        <a href="http://www.quantisan.com/index24.html" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;newer</a>

                    <a href="http://www.quantisan.com/index26.html" class="button_accent" style="position: absolute; right: 0;">continue&nbsp;&nbsp;&nbsp;&rarr;</a>
</p>
    </section>

<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
		try {
			var pageTracker = _gat._getTracker("UA-2047602-4");
			pageTracker._trackPageview();
		} catch(err) {}</script>
</body>
</html>