<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="http://www.quantisan.com/theme/css/style.css">
    <link rel="stylesheet" type="text/css" href="http://www.quantisan.com/theme/css/pygments.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300|Inconsolata' rel='stylesheet' type='text/css'>
	<link href="http://www.quantisan.com/" type="application/atom+xml" rel="alternate" title="Quantitative Artisan ATOM Feed" />


        <title>Anatomy of a JForex strategy, Part 1 - Quantitative Artisan</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Paul Lam">
</head>

<body>
    <section id="navbar">
        <div class="user_meta">
            <h1 id="user"><a href="http://www.quantisan.com" class="">Paul Lam</a></h1>
            <h2>Data. Engineering. Startup.</h2>
        </div>
        <div class="nav-button">
            <ul>
                                    <li><a href="http://www.quantisan.com/about/">About</a></li>
                            <li><a href="mailto:paul@quantisan.com">Email</a></li>
                            <li><a href="http://www.twitter.com/Quantisan">Twitter</a></li>
                            <li><a href="http://www.github.com/Quantisan">Github</a></li>
                            <li><a href="http://www.linkedin.com/in/paullam">LinkedIn</a></li>
                            <li><a href="http://feeds.feedburner.com/Quantisan">Subscribe</a></li>
             </ul>
         </div>
     </section>

     <section id="sidebar">
        <img src="/images/profile_circle.png" id="logo" alt="logo">

        <div class="user_meta">
            <h1 id="user"><a href="http://www.quantisan.com" class="">Paul Lam</a></h1>
            <h2>Data. Engineering. Startup.</h2>
            <ul>
                        <li><a href="http://www.quantisan.com/about/">About</a></li>
                        <li><a href="mailto:paul@quantisan.com">Email</a></li>
                        <li><a href="http://www.twitter.com/Quantisan">Twitter</a></li>
                        <li><a href="http://www.github.com/Quantisan">Github</a></li>
                        <li><a href="http://www.linkedin.com/in/paullam">LinkedIn</a></li>
                        <li><a href="http://feeds.feedburner.com/Quantisan">Subscribe</a></li>
            </ul>
        </div>
        <footer>
            <address>
                Powered by <a href='http://docs.getpelican.com/en/latest/'>Pelican</a>,
                <a href='https://github.com/jamescooke/pelican-svbtle#readme'>theme info</a>.
            </address>
        </footer>
    </section>

    <section id="posts">
<article>
    <h1 class="title">
        <a href="http://www.quantisan.com/anatomy-of-a-jforex-strategy-part-1/" rel="bookmark">Anatomy of a JForex strategy, Part 1</a>
    </h1>

    <div class='article-content'>
        <p>Continuing on from Part 1 of this series: <a href="http://www.quantisan.com/getting-started-learning-jforex-programming/">Getting started learning
JForex programming</a>, now we're ready to discuss the real thing. You
build JForex strategies by using the IStrategy Interface (<a href="http://download.oracle.com/javase/tutorial/java/concepts/interface.html">What is an
Interface?</a>). Basically, an Interface is a code skeleton with a set of
predefined empty methods that you'll need to implement yourself. The six
standard methods of the IStrategy Interface are:</p>
<ol>
<li>onStart</li>
<li>onStop</li>
<li>onMessage</li>
<li>onAccount</li>
<li>onTick</li>
<li>onBar</li>
</ol>
<p>Below is an empty IStrategy Interface implementation, also known as a
JForex strategy. This code will compile fine in JForex and you can even
run it. But it doesn't do anything at all because there is no code to
run in each of the methods. Each of the six methods will just be called
and exit immediately.</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">com.dukascopy.api.</span><span class="err">\</span><span class="o">*;</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmptyStrategy</span> <span class="kd">implements</span> <span class="n">IStrategy</span> <span class="o">{</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStart</span><span class="o">(</span><span class="n">IContext</span> <span class="n">context</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onTick</span><span class="o">(</span><span class="n">Instrument</span> <span class="n">instrument</span><span class="o">,</span> <span class="n">ITick</span> <span class="n">tick</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBar</span><span class="o">(</span><span class="n">Instrument</span> <span class="n">instrument</span><span class="o">,</span> <span class="n">Period</span> <span class="n">period</span><span class="o">,</span> <span class="n">IBar</span> <span class="n">askBar</span><span class="o">,</span> <span class="n">IBar</span> <span class="n">bidBar</span><span class="o">)</span>
        <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onMessage</span><span class="o">(</span><span class="n">IMessage</span> <span class="n">message</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onAccount</span><span class="o">(</span><span class="n">IAccount</span> <span class="n">account</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStop</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span> 
<span class="o">}</span>
</pre></div>


<p>Each of the method is triggered by a specific event. You can probably
guess what they are from their name.</p>
<h2>onStart (line 5)</h2>
<p>This is the first method that is called when you run your strategy. It
will run once and only once at the start of your strategy. Normally you
do your initialization in here. The thing to note for onStart is in line
5 of the code. The method signature of onStart is</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStart</span><span class="o">(</span><span class="n">IContext</span> <span class="n">context</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JFException</span>
</pre></div>


<p>The object
in the parameter and given to you in this method is an IContext object.
If IStrategy is the skeleton, then IContext is the heart of the
strategy. Please take a look at this <a href="http://www.dukascopy.com/client/javadoc/com/dukascopy/api/IContext.html">javadoc link to IContext</a> to see
what this object does. <strong>Javadoc?</strong>: Now is a good time to introduce the
second of the three essential resources of a JForex programmer. The
<a href="http://www.dukascopy.com/client/javadoc/">JForex Javadoc</a> is the single most up-to-date API documentation
<em>explaining</em> each and every object and methods of the JForex API. Think
of it like a reference manual. Note that although it's comprehensive,
most of the explanation is very sparse and possibly incomplete. IContext
is a core JForex object to access many important components of the
JForex system, such as the ordering engine, charts, console,
indicators... You get the idea. It is important! You typically want to
keep a local copy of it as this is the only time (in onStart) that this
object will be passed to you in IStrategy.</p>
<h2>onStop (line 26)</h2>
<p>As the name suggest, this method is called once you send a stop command
to your strategy. You do your program wrap-up such as logging and
flushing data here. Not much out of the ordinary with this one.</p>
<h2>onMessage (line 18)</h2>
<p>Whereas we know when onStart and onStop will be called, onMessage is an
asynchronous method in that you don't know exactly when it will run.
This method is called when the Dukascopy server sends your strategy a
message. For example, the server calls onMessage to let you know that
your order has been filled. You receive and process the server message
by accessing the <a href="http://www.dukascopy.com/client/javadoc/com/dukascopy/api/IMessage.html">IMessage object</a> that is passed to you.
<strong>Important:</strong>There is no guarantee that you will receive each and every
message sent to your strategy from the server. Perhaps your strategy
process is clogged. Or maybe your internet connection had a hiccup. If
your strategy onMessage doesn't get called by the server for whatever
reason, the server couldn't care less and won't be checking nor trying
again. So don't do anything critical like managing your orders in
onMessage!</p>
<h2>onAccount (line 22)</h2>
<p>This method is called whenever your account information update is
received. The method provides access to the <a href="http://www.dukascopy.com/client/javadoc/com/dukascopy/api/IAccount.html">IAccount object</a>, which
you use to get your account information. Say if you have an open
position, your account information changes on every tick because your
equity is cash + unrealized profit/loss. In that case, onAccount is
called every 5 seconds by the server at most to avoid flooding your
strategy. <strong>More Important:</strong>The IAccount object is not connected live
to your account in the server. It is merely a snapshot of your account.
For example, if you keep a local copy of an IAccount object. Do some
trading to change your balance. Then ask the same IAccount for account
balance information, you will not see a change. As such, always update
your local copy of IAccount within the onAccount method to keep your
account information up-to-date for your strategy's use.</p>
<h2>To be continued</h2>
<p>onStart, onStop, onMessage, and onAccount methods are <em>administrative</em>
methods for your strategy. The last two methods that we'll discuss,
onTick and onBar, is where the magic happens in a strategy. I am saving
the best for last in the next post.</p>
    </div>

    <div class='post-footer'>
        <div class='share-footer'>
            <div id='dated' class="abbr published" title='2010-12-10T08:10:00'>
                Posted 10 December 2010
            </div>

<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_pinterest_pinit"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=quantisan"></script>
<!-- AddThis Button END -->
 
        </div>

        <div id="article_meta">
            Category:
            <a href="http://www.quantisan.com/category/algorithmic-trading/">algorithmic-trading</a>
            <br />Tags:
            <a href="http://www.quantisan.com/tag/JForex/">JForex</a>
            <a href="http://www.quantisan.com/tag/tutorial/">tutorial</a>
        </div>

        <div class='related-posts'>
            <h2>Related Posts:</h2>

            <ul>
                <li><a href="http://www.quantisan.com/anatomy-of-a-jforex-strategy-part-2/">Anatomy of a JForex strategy, Part 2</a></li>
                <li><a href="http://www.quantisan.com/getting-started-learning-jforex-programming/">Getting started learning JForex programming</a></li>
                <li><a href="http://www.quantisan.com/dissecting-a-jforex-strategy-ma_play-java/">Dissecting a JForex strategy -- MA_Play.java</a></li>
                <li><a href="http://www.quantisan.com/more-trouble-with-jforex-iindicators/">More trouble with JForex IIndicators</a></li>
                <li><a href="http://www.quantisan.com/jokes-on-us-jforex-demo-2136-is-out-of-whack/">Joke&#039;s on us: JForex DEMO 2.13.6 is out of whack</a></li>
            </ul>            
        </div>

    </div>
</article>

<footer>
    <a href="http://www.quantisan.com/" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;Back to blog</a>
</footer>

<div id="comments">
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
    var disqus_identifier = "anatomy-of-a-jforex-strategy-part-1/";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://quantisan-blog.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view <a href="http://disqus.com/?ref_noscript">comments</a>.</noscript>
</div>
    </section>

<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
		try {
			var pageTracker = _gat._getTracker("UA-2047602-4");
			pageTracker._trackPageview();
		} catch(err) {}</script>
</body>
</html>