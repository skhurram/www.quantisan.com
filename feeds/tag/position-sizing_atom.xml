<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Quantitative Artisan</title><link href="http://www.quantisan.com/" rel="alternate"></link><link href="http://www.quantisan.com/feeds/tag/position-sizing_atom.xml" rel="self"></link><id>http://www.quantisan.com/</id><updated>2010-08-17T11:58:00+01:00</updated><entry><title>JForex Example: Automatic position sizing</title><link href="http://www.quantisan.com/jforex-example-automatic-position-sizing/" rel="alternate"></link><updated>2010-08-17T11:58:00+01:00</updated><author><name>Paul Lam</name></author><id>tag:www.quantisan.com,2010-08-17:jforex-example-automatic-position-sizing/</id><summary type="html">&lt;p&gt;Proper position sizing is an integral part of risk management. It &lt;em&gt;can&lt;/em&gt;
be one of the easiest thing to do too. For example, I &lt;a href="http://www.quantisan.com/reducing-overall-market-exposure-according-to-market-volatility/"&gt;typically size my
trading position&lt;/a&gt; based on the following factors:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Amount of capital willing to put at risk.&lt;/li&gt;
&lt;li&gt;Stop price level.&lt;/li&gt;
&lt;li&gt;Volatility of the instrument.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The following JForex code calculates a lot size based on these three
factors. It is part of my &lt;a href="http://www.quantisan.com/sixth-place-finish-in-the-dukascopy-jforex-july-strategy-contest/"&gt;Dukascopy JForex July strategy&lt;/a&gt; (complete
source code to the strategy is available via that link). [java
firstline="232"] private double getLot(Instrument instrument) throws
JFException { double riskAmt; double lotSize = 0; riskAmt =
this.acctEquity * (this.riskPct / 100d); // CCYUSD only lotSize =
riskAmt / (this.atr[instrument.ordinal()] * this.atrFactor); lotSize /=
1000000d; // in millions return roundLot(lotSize); } [/java] Referring
to line 237, riskAmt is the amount of capital to put at risk for a trade
(#1). Line 238 calculates lotSize, which is the position size that we
want. The denominator in that division is the distance of the stop in
pips. The strategy uses a multiple of ATR to set the stop loss. Nothing
fancy here. Lines 240--241 are to set the lotSize value according to the
JForex API specification. In which the lot amount is in millions and in
steps of a thousand units, or 0.001 step size. As I've noted in the
code, the caveat to this implementation is that the secondary currency
of the instrument and your account currency needs to be in U.S. dollar.
However, it's just a matter of conversion to extend this method for
other currencies. Update: I expanded on this functionality in the
&lt;a href="http://www.quantisan.com/jfutil-an-open-source-jforex-utilities-library/"&gt;JFUtil open source project&lt;/a&gt;.&lt;/p&gt;
&lt;/p&gt;</summary><category term="JForex"></category><category term="position sizing"></category></entry></feed>