<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="http://www.quantisan.com/theme/css/style.css">
    <link rel="stylesheet" type="text/css" href="http://www.quantisan.com/theme/css/pygments.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300|Inconsolata' rel='stylesheet' type='text/css'>
	<link href="http://www.quantisan.com/" type="application/atom+xml" rel="alternate" title="Quantitative Artisan ATOM Feed" />


        <title>Quantitative Artisan</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Paul Lam">
</head>

<body>
    <section id="navbar">
        <div class="user_meta">
            <h1 id="user"><a href="http://www.quantisan.com" class="">Paul Lam</a></h1>
            <h2>Data. Engineering. Startup.</h2>
        </div>
        <div class="nav-button">
            <ul>
                                    <li><a href="http://www.quantisan.com/about/">About</a></li>
                            <li><a href="mailto:paul@quantisan.com">Email</a></li>
                            <li><a href="http://www.twitter.com/Quantisan">Twitter</a></li>
                            <li><a href="http://www.github.com/Quantisan">Github</a></li>
                            <li><a href="http://www.linkedin.com/in/paullam">LinkedIn</a></li>
                            <li><a href="http://feeds.feedburner.com/Quantisan">Subscribe</a></li>
             </ul>
         </div>
     </section>

     <section id="sidebar">
        <img src="/images/profile_circle.png" id="logo" alt="logo">

        <div class="user_meta">
            <h1 id="user"><a href="http://www.quantisan.com" class="">Paul Lam</a></h1>
            <h2>Data. Engineering. Startup.</h2>
            <ul>
                        <li><a href="http://www.quantisan.com/about/">About</a></li>
                        <li><a href="mailto:paul@quantisan.com">Email</a></li>
                        <li><a href="http://www.twitter.com/Quantisan">Twitter</a></li>
                        <li><a href="http://www.github.com/Quantisan">Github</a></li>
                        <li><a href="http://www.linkedin.com/in/paullam">LinkedIn</a></li>
                        <li><a href="http://feeds.feedburner.com/Quantisan">Subscribe</a></li>
            </ul>
        </div>
        <footer>
            <address>
                Powered by <a href='http://docs.getpelican.com/en/latest/'>Pelican</a>,
                <a href='https://github.com/jamescooke/pelican-svbtle#readme'>theme info</a>.
            </address>
        </footer>
    </section>

    <section id="posts">
	
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/anatomy-of-a-jforex-strategy-part-2/" rel='bookmark'>Anatomy of a JForex strategy, Part 2</a>
            </h1>
            <div class="article-content"> <p>We looked at <a href="http://www.quantisan.com/anatomy-of-a-jforex-strategy-part-1/">four of the six methods in the IStrategy Interface</a> in a
previous post. The last two methods, onTick and onBar, is where your
strategy connect with market data. Either one, or both, of these methods
is where you put your trading algorithm in. Your strategy would then be
able to process the market data as they arrive one tick/bar at a time.
Recall that IStrategy Interface is the skeleton of your strategy. And
that IContext object is the heart of your strategy. onTick/onBar is the
head of your strategy, which contains your trading algorithm, which is
the brain.</p>
<h2>onTick</h2>
<p>Here's the method definition of onTick. </p>
<div class="highlight"><pre><span class="n">onTick</span><span class="o">(</span><span class="n">Instrument</span> <span class="n">instrument</span><span class="o">,</span> <span class="n">ITick</span> <span class="n">tick</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span>
</pre></div>


<p><strong>Important:</strong>onTick is called for each and every instrument that your
JForex platform is subscribed to (the instrument list in your workspace
box). Let me say that again, onTick is called for each and every
instrument that your JForex platform is subscribed to. The standard
practice is to <a href="http://www.dukascopy.com/wiki/index.php?title=Filter_Ticks/Bars">filter out ticks</a> for instruments that you don't want
with a simple IF-return statement.
<code>if (instrument != myInstrument) return;</code> Actual tick data is passed to
your strategy using the ITick object from the onTick method's parameter.
Take a look at the <a href="http://www.dukascopy.com/client/javadoc/com/dukascopy/api/ITick.html">ITick javadoc entry</a> to see what it offers.</p>
<h2>onBar</h2>
<div class="highlight"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBar</span><span class="o">(</span><span class="n">Instrument</span> <span class="n">instrument</span><span class="o">,</span> <span class="n">Period</span> <span class="n">period</span><span class="o">,</span> <span class="n">IBar</span> <span class="n">askBar</span><span class="o">,</span> <span class="n">IBar</span> <span class="n">bidBar</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span>
</pre></div>


<p>onBar works in a similar manner to onTick. In which onBar is called for each
and every subsribed instrument <em>and period</em> known to JForex. Similarly,
you have to <a href="http://www.dukascopy.com/wiki/index.php?title=Filter_Ticks/Bars">filter out all the unwanted instruments and periods</a> or else there will be expected results from your strategy.
Another point to note is that onBar provides both a <a href="http://www.dukascopy.com/client/javadoc/com/dukascopy/api/IBar.html">IBar</a> askBar and
IBar bidBar, representing the ask and bid bars. <strong>Question:</strong> What
happens when two or more periods overlap as in 13:45? 1, 5, and
15-minutes bars are all arriving at the same time (not to mention the
periods in seconds too). <strong>Answer:</strong> According to Dukascopy Support in
the forum, "They come in a strict order, for example (1min 1min 1min
1min 1min 5min 1min 1min 1min 1min 1min 5min ..) They come in cycles,
where <a href="http://www.dukascopy.com/swiss/english/forex/jforex/forum/viewtopic.php?f=5&amp;t=23959">smaller periods comes first</a>."</p>
<h2>JForex Support Forum</h2>
<p>As you program your strategy with JForex, you will no doubt come up with
questions of your own. The best place to ask is at the official <a href="http://www.dukascopy.com/swiss/english/forex/jforex/forum/">JForex
Support Forum</a>. This is the last of the three essential JForex
resources that I alluded to earlier. Even if you don't have any specific
question, there are sample codes, coding discussion, and hundreds of
existing Q&amp;A from other JForex developers posted in the forum.</p>
<h2>Summary</h2>
<p>The discussion so far has been very high level. To show you what you can
actually <em>do</em> in an IStrategy, we will <a href="http://www.quantisan.com/dissecting-a-jforex-strategy-ma_play-java/">dissect a working strategy in
the next post</a>. And what else better to examine than the most popular
JForex strategy of them all -- MA_Play.java.</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/anatomy-of-a-jforex-strategy-part-2/' title='2010-12-14T07:49:00'>14 December 2010</a> in <a href="http://www.quantisan.com/category/algorithmic-trading/">algorithmic-trading</a>.              
            </div>
        </article>
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/anatomy-of-a-jforex-strategy-part-1/" rel='bookmark'>Anatomy of a JForex strategy, Part 1</a>
            </h1>
            <div class="article-content"> <p>Continuing on from Part 1 of this series: <a href="http://www.quantisan.com/getting-started-learning-jforex-programming/">Getting started learning
JForex programming</a>, now we're ready to discuss the real thing. You
build JForex strategies by using the IStrategy Interface (<a href="http://download.oracle.com/javase/tutorial/java/concepts/interface.html">What is an
Interface?</a>). Basically, an Interface is a code skeleton with a set of
predefined empty methods that you'll need to implement yourself. The six
standard methods of the IStrategy Interface are:</p>
<ol>
<li>onStart</li>
<li>onStop</li>
<li>onMessage</li>
<li>onAccount</li>
<li>onTick</li>
<li>onBar</li>
</ol>
<p>Below is an empty IStrategy Interface implementation, also known as a
JForex strategy. This code will compile fine in JForex and you can even
run it. But it doesn't do anything at all because there is no code to
run in each of the methods. Each of the six methods will just be called
and exit immediately.</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">com.dukascopy.api.</span><span class="err">\</span><span class="o">*;</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmptyStrategy</span> <span class="kd">implements</span> <span class="n">IStrategy</span> <span class="o">{</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStart</span><span class="o">(</span><span class="n">IContext</span> <span class="n">context</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onTick</span><span class="o">(</span><span class="n">Instrument</span> <span class="n">instrument</span><span class="o">,</span> <span class="n">ITick</span> <span class="n">tick</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBar</span><span class="o">(</span><span class="n">Instrument</span> <span class="n">instrument</span><span class="o">,</span> <span class="n">Period</span> <span class="n">period</span><span class="o">,</span> <span class="n">IBar</span> <span class="n">askBar</span><span class="o">,</span> <span class="n">IBar</span> <span class="n">bidBar</span><span class="o">)</span>
        <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onMessage</span><span class="o">(</span><span class="n">IMessage</span> <span class="n">message</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onAccount</span><span class="o">(</span><span class="n">IAccount</span> <span class="n">account</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span> 
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStop</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">JFException</span> <span class="o">{</span> <span class="o">}</span> 
<span class="o">}</span>
</pre></div>


<p>Each of the method is triggered by a specific event. You can probably
guess what they are from their name.</p>
<h2>onStart (line 5)</h2>
<p>This is the first method that is called when you run your strategy. It
will run once and only once at the start of your strategy. Normally you
do your initialization in here. The thing to note for onStart is in line
5 of the code. The method signature of onStart is</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStart</span><span class="o">(</span><span class="n">IContext</span> <span class="n">context</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JFException</span>
</pre></div>


<p>The object
in the parameter and given to you in this method is an IContext object.
If IStrategy is the skeleton, then IContext is the heart of the
strategy. Please take a look at this <a href="http://www.dukascopy.com/client/javadoc/com/dukascopy/api/IContext.html">javadoc link to IContext</a> to see
what this object does. <strong>Javadoc?</strong>: Now is a good time to introduce the
second of the three essential resources of a JForex programmer. The
<a href="http://www.dukascopy.com/client/javadoc/">JForex Javadoc</a> is the single most up-to-date API documentation
<em>explaining</em> each and every object and methods of the JForex API. Think
of it like a reference manual. Note that although it's comprehensive,
most of the explanation is very sparse and possibly incomplete. IContext
is a core JForex object to access many important components of the
JForex system, such as the ordering engine, charts, console,
indicators... You get the idea. It is important! You typically want to
keep a local copy of it as this is the only time (in onStart) that this
object will be passed to you in IStrategy.</p>
<h2>onStop (line 26)</h2>
<p>As the name suggest, this method is called once you send a stop command
to your strategy. You do your program wrap-up such as logging and
flushing data here. Not much out of the ordinary with this one.</p>
<h2>onMessage (line 18)</h2>
<p>Whereas we know when onStart and onStop will be called, onMessage is an
asynchronous method in that you don't know exactly when it will run.
This method is called when the Dukascopy server sends your strategy a
message. For example, the server calls onMessage to let you know that
your order has been filled. You receive and process the server message
by accessing the <a href="http://www.dukascopy.com/client/javadoc/com/dukascopy/api/IMessage.html">IMessage object</a> that is passed to you.
<strong>Important:</strong>There is no guarantee that you will receive each and every
message sent to your strategy from the server. Perhaps your strategy
process is clogged. Or maybe your internet connection had a hiccup. If
your strategy onMessage doesn't get called by the server for whatever
reason, the server couldn't care less and won't be checking nor trying
again. So don't do anything critical like managing your orders in
onMessage!</p>
<h2>onAccount (line 22)</h2>
<p>This method is called whenever your account information update is
received. The method provides access to the <a href="http://www.dukascopy.com/client/javadoc/com/dukascopy/api/IAccount.html">IAccount object</a>, which
you use to get your account information. Say if you have an open
position, your account information changes on every tick because your
equity is cash + unrealized profit/loss. In that case, onAccount is
called every 5 seconds by the server at most to avoid flooding your
strategy. <strong>More Important:</strong>The IAccount object is not connected live
to your account in the server. It is merely a snapshot of your account.
For example, if you keep a local copy of an IAccount object. Do some
trading to change your balance. Then ask the same IAccount for account
balance information, you will not see a change. As such, always update
your local copy of IAccount within the onAccount method to keep your
account information up-to-date for your strategy's use.</p>
<h2>To be continued</h2>
<p>onStart, onStop, onMessage, and onAccount methods are <em>administrative</em>
methods for your strategy. The last two methods that we'll discuss,
onTick and onBar, is where the magic happens in a strategy. I am saving
the best for last in the next post.</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/anatomy-of-a-jforex-strategy-part-1/' title='2010-12-10T08:10:00'>10 December 2010</a> in <a href="http://www.quantisan.com/category/algorithmic-trading/">algorithmic-trading</a>.              
            </div>
        </article>
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/getting-started-learning-jforex-programming/" rel='bookmark'>Getting started learning JForex programming</a>
            </h1>
            <div class="article-content"> <p>The biggest problem I had when learning to program my own trading
strategies in JForex is finding where to start learning. There were few
JForex documentation available at the time and I had to teach myself
through painstaking trial and error with the help of Dukascopy's
technical support. Things have certainly changed for the better as a
JForex community is starting to sprout and documentation for it is at
least sufficient to get anyone started. This post is the first of a
series of quick beginner's guide to learning JForex programming by
putting all these resources in a tutorial.</p>
<h2>JForex is a Java tool</h2>
<p>JForex is actually not a programming language. It is an application
programming interface (API) for use with the standard Java programming
language. As such, the first step to learning to program in JForex is to
learn Java. Luckily, Java is one of the most popular programming
languages. So there're plenty of resources on and off the web to learn
Java programming. Some examples of free online tutorials are:</p>
<ol>
<li><a href="http://download.oracle.com/javase/tutorial/">The Java Tutorials</a> -- This is an official tutorial from the
    developer of Java themselves. Highly recommended.</li>
<li><a href="http://www.roseindia.net/java/beginners/">Beginners Java Tutorial</a> -- More geared for the absolute
    beginners to programming.</li>
</ol>
<p>If you prefer a book, I would recommend <a href="http://www.amazon.com/gp/product/0596009208?ie=UTF8&amp;tag=quantisan-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0596009208">Head First Java, 2nd
Edition</a>. I brushed up on my Java from this book. Don't dwell on
Java too much though as you only need to know the basics to get started
with JForex. Just read a few chapters to understand the Java syntax and
then move on. You can always refer back to them later.</p>
<h2>Diving into JForex</h2>
<p>The <a href="http://www.dukascopy.com/wiki/index.php?title=Main_Page">JForex Wiki</a> is one of the three essential resources for JForex
programmers. I will be referring to some specific pages of the Wiki in
much of this series of posts. If you haven't done so already, <a href="http://www.dukascopy.com/ibentry.php?ibref=1143/">signup
for a DEMO account at Dukascopy</a>. Then launch the JForex platform and
follow the instructions on the <a href="http://www.dukascopy.com/wiki/index.php?title=Use_in_JForex">Use in JForex</a> wiki page to assemble
your first JForex strategy!</p>
<h2>Summary</h2>
<p>So far so good? By this point, I hope you can understand basic Java
source code and know how to start/open, compile, and run a JForex
strategy. In the next post in this learning JForex series, we will
<a href="http://www.quantisan.com/anatomy-of-a-jforex-strategy-part-1/">study the anatomy of a JForex strategy</a>.</p>
</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/getting-started-learning-jforex-programming/' title='2010-12-08T07:04:00'>08 December 2010</a> in <a href="http://www.quantisan.com/category/algorithmic-trading/">algorithmic-trading</a>.              
            </div>
        </article>
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/another-trading-contest-from-dukascopy/" rel='bookmark'>Another trading contest from Dukascopy</a>
            </h1>
            <div class="article-content"> <p>Dukascopy started a new contest this month. This contest is manual
trading only on a demo account with no cash commitment by contestants.
The twist is that the ranking is determined not only by your demo
account balance, but also the total pips gained, popularity, and scoring
by Dukascopy's judges. Each trade in the contest needs to be commented
by the contestant through the JForex trading platform (when you submit
an order the platform asks you for a comment). See <a href="http://www.dukascopy.com/tradercontest/?action=blog&amp;trader=Quantisan">my contest page for
comment examples</a> (shameless plug). About half of your score is based
on these trade comments as they are the basis for generating popularity
points and the Dukascopy judges' final evaluation. I can see the
potential in this contest as it offers transparency and encourages
interactions rather than let everyone just gamble away. However, most of
the trade comments now are meaningless as it's clear that you can
generate buzz simply by making ridiculous gains. Perhaps this might
change after this month's final ranking is released as it is not clear
how Dukascopy will allocate each contestant's 25% of points. The judging
by Dukascopy can effectively bump or dump you a few ranking. The
incentive to do this is the USD \$15,000 'cash' prizes to be won every
month just like the Dukascopy Strategy Contest. And similarly, these
'cash' prizes are deposited into the winner's Dukascopy trading account
<a href="http://www.quantisan.com/reading-the-fine-print-for-dukascopy-jforex-strategy-contest/">with a withholding period</a>. So they're forcing you to open an account
with them if you win, which is understandable as this is a marketing
effort. For information or registration in the contest, <a href="http://www.dukascopy.com/ibentry.php?ibref=1143/">visit the
Dukascopy website</a> and navigate to the Trader Contest page.</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/another-trading-contest-from-dukascopy/' title='2010-12-06T12:23:00'>06 December 2010</a> in <a href="http://www.quantisan.com/category/forex/">forex</a>.              
            </div>
        </article>
<p class="paginator">
		        <a href="http://www.quantisan.com/index17.html" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;newer</a>

                    <a href="http://www.quantisan.com/index19.html" class="button_accent" style="position: absolute; right: 0;">continue&nbsp;&nbsp;&nbsp;&rarr;</a>
</p>
    </section>

<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
		try {
			var pageTracker = _gat._getTracker("UA-2047602-4");
			pageTracker._trackPageview();
		} catch(err) {}</script>
</body>
</html>