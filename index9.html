<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="http://www.quantisan.com/theme/css/style.css">
    <link rel="stylesheet" type="text/css" href="http://www.quantisan.com/theme/css/pygments.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300|Inconsolata' rel='stylesheet' type='text/css'>
	<link href="http://www.quantisan.com/" type="application/atom+xml" rel="alternate" title="Quantitative Artisan ATOM Feed" />


        <title>Quantitative Artisan</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Paul Lam">
</head>

<body>
    <section id="navbar">
        <div class="user_meta">
            <h1 id="user"><a href="http://www.quantisan.com" class="">Paul Lam</a></h1>
            <h2>Data. Engineering. Startup.</h2>
        </div>
        <div class="nav-button">
            <ul>
                                    <li><a href="http://www.quantisan.com/about/">About</a></li>
                            <li><a href="mailto:paul@quantisan.com">Email</a></li>
                            <li><a href="http://www.twitter.com/Quantisan">Twitter</a></li>
                            <li><a href="http://www.github.com/Quantisan">Github</a></li>
                            <li><a href="http://www.linkedin.com/in/paullam">LinkedIn</a></li>
                            <li><a href="http://feeds.feedburner.com/Quantisan">Subscribe</a></li>
             </ul>
         </div>
     </section>

     <section id="sidebar">
        <img src="/images/profile_circle.png" id="logo" alt="logo">

        <div class="user_meta">
            <h1 id="user"><a href="http://www.quantisan.com" class="">Paul Lam</a></h1>
            <h2>Data. Engineering. Startup.</h2>
            <ul>
                        <li><a href="http://www.quantisan.com/about/">About</a></li>
                        <li><a href="mailto:paul@quantisan.com">Email</a></li>
                        <li><a href="http://www.twitter.com/Quantisan">Twitter</a></li>
                        <li><a href="http://www.github.com/Quantisan">Github</a></li>
                        <li><a href="http://www.linkedin.com/in/paullam">LinkedIn</a></li>
                        <li><a href="http://feeds.feedburner.com/Quantisan">Subscribe</a></li>
            </ul>
        </div>
        <footer>
            <address>
                Powered by <a href='http://docs.getpelican.com/en/latest/'>Pelican</a>,
                <a href='https://github.com/jamescooke/pelican-svbtle#readme'>theme info</a>.
            </address>
        </footer>
    </section>

    <section id="posts">
	
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/jokes-on-us-jforex-demo-2136-is-out-of-whack/" rel='bookmark'>Joke&#039;s on us: JForex DEMO 2.13.6 is out of whack</a>
            </h1>
            <div class="article-content"> <p>I hope this is a April Fool's joke but it isn't. As shown, the Dukascopy
JForex DEMO platform version 2.13.6 released this week is causing havoc
to my strategy. I tested my contest strategy, which has been running
fine for almost a year, but is now failing left and right. Even though
this is only happening with the DEMO platform (the LIVE platform is a
stable release and is running fine at the moment), the fact that they
published a buggy version for us developers as guinea pigs is upsetting.
JForex developers are clients too, after all. [caption
id="attachment_4974" align="aligncenter" width="580" caption="Dukascopy
JForex DEMO 2.13.6"]<img alt="" src="http://www.quantisan.com/static/images/2011/04/jforex2.13.6.scrncap-580x414.png" title="jforex2.13.6.scrncap" />[/caption]</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/jokes-on-us-jforex-demo-2136-is-out-of-whack/' title='2011-04-01T12:13:00'>01 April 2011</a> in <a href="http://www.quantisan.com/category/journal/">journal</a>.              
            </div>
        </article>
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/more-trouble-with-jforex-iindicators/" rel='bookmark'>More trouble with JForex IIndicators</a>
            </h1>
            <div class="article-content"> <p>JFUtil offers [an elegant way of requesting indicators from the JForex
IIndicators interface][]. But the new design for JForex IIndicators
through JFUtil is only fixing one side of the problem. There is still
the question of what to do with the multiple return types from the
calculations. In JForex, indicators like RSI returns a one-dimensional
array. Other indicators like Stochastic Oscillator returns a
two-dimensional array. And some other ones return three or more
dimensional arrays. Java doesn't allow overloading a method with
multiple return types, as the program wouldn't know what to expect. So
how can we get rid of coding mess like this in our JForex strategy?
[java] Stochastic stochBean = IndicatorBeanFactory.getStochastic();
Object[] objs = Indicating.calculateMultiDimension(instrument,
Period.ONE_MIN, stochBean, 1); double[][] sto = new double[2][]; sto[0]
= (double[])objs[0]; // %K values sto[1] = (double[])objs[1]; // %D
values [/java] The default calculation method in JForex returns a
generic Object array. It's up to the programmer to know what to expect
from the call and cast the Object into something useful. Obviously, this
is a recipe for programming headaches and runtime errors. Having said
this, one of the biggest benefits of JForex is that it uses a standard
programming language like Java. So if there's something that you don't
like about the API, you can probably change it (e.g. Facade pattern).
This is the purpose of JFUtil to some extent, to <a href="http://www.quantisan.com/jfutil-an-open-source-jforex-utilities-library/">simplify the JForex
API behaviour</a>. In any case, I'm sure other Java programmers have
faced this problem before and have come up with good solutions for it. A
search on stackoverflow.com doesn't yield a quick fix solution at first
glimpse. My guess is that this require leveraging the knowledge about
the program structure. We know in advance what dimension of the
calculation result we can expect based on the indicator itself, perhaps
I can use something like a Command pattern to choose a calculation
sub-routine and then return a Map object with named values? I have yet
to try implementing this. I am open to design suggestions to encapsulate
multiple return values through a single interface. So that any indicator
bean can use the same calculation interface with an easy to use output.
In the mean time, getting multi-dimensional indicators results through
<a href="http://www.quantisan.com/jfutil-an-open-source-jforex-utilities-library/">JFUtil 2.1.2</a> isn't pretty.</p>
<p>[an elegant way of requesting indicators from the JForex IIndicators
  interface]: http://www.quantisan.com/conjuring-beans-to-simplify-jforex-iindicators/</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/more-trouble-with-jforex-iindicators/' title='2011-03-29T07:36:00'>29 March 2011</a> in <a href="http://www.quantisan.com/category/algorithmic-trading/">algorithmic-trading</a>.              
            </div>
        </article>
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/conjuring-beans-to-simplify-jforex-iindicators/" rel='bookmark'>Conjuring beans to simplify JForex IIndicators</a>
            </h1>
            <div class="article-content"> <p>The JForex API is not perfect. Like any application programming
interface (API), some parts of the JForex API is better designed than
others. One of the most gripping problems with JForex is its use of
technical analysis (TA) indicators. Here's an example of using an
exponential moving average, one of the most simplest indicators.
<code>ema(instrument, Period.TEN_SECS, OfferSide.BID, IIndicators.AppliedPrice.MEDIAN_PRICE, 14, 0);</code>
And the corresponding javadoc explaining the parameters,
<code>Parameters: instrument instrument of the bar period period of the bar side bid or ask side of the bar appliedPrice type of input data timePeriod time period value shift number of candle back in time staring from current bar. 0 - current bar (currently generated from ticks), 1 - previous bar (last formed bar), 2 - current bar minus 2 bars and so on</code>
It's not intuitive but it's usable. Recall that in my <a href="http://www.quantisan.com/getting-started-learning-jforex-programming/">JForex
programming tutorial</a>, I suggested using the JForex API javadoc to
find out information about the API. However, for the case of
IIndicators, if you <a href="http://www.dukascopy.com/client/javadoc/com/dukascopy/api/IIndicators.html">take a look at its javadoc</a>, you will only be led
to more confusion by the hundred or so mysterious indicator methods with
cryptic parameter names. In JForex API, if you want to calculate an
indicator, you need to look through a long list of abbreviated method
names in the javadoc. Many of which are not easy to decipher. Secondly,
you need to figure out the generic parameters and set them correctly,
which is different for almost every indicator. Lastly, as there is no
standard interface for indicators, you need to hardcode these into your
strategy with little flexibility. In contrast, here's the same call
using <a href="http://www.quantisan.com/jfutil-an-open-source-jforex-utilities-library/">JFUtil 2.1.0</a> to get an EMA value. It has notably more lines of
code. It is designed deliberately so using an object oriented approach
by encapsulating the indicator parameters into a bean object and
abstracting the calculation into a single generic function call. [java]
// get an EMA indicator value by building an indicator bean
MovingAverage maBean = IndicatorBeanFactory.getMovingAverage(); // then
sets its parameters with obvious method names
maBean.setAppliedPrice(IIndicators.AppliedPrice.MEDIAN_PRICE)
.setMAType(IIndicators.MaType.EMA) .setWidth(14); // all of these are
optional parameters // feed the bean into a generic calculation method
to get the result double ema = Indicating.calculate(instrument,
Period.ONE_MIN, maBean); [/java] With JFUtil, to calculate an
indicator, you create an indicator bean with the intuitive bean name
that corresponds with the full name of an indicator. For example, a
moving average will be MovingAverage. Then you set the
indicator-specific parameters using clearly defined methods with useful
javadoc descriptions. One method for one parameter. Lastly, you feed
this indicator bean into a generic calculation function to get your
value. It took some thinking to abstract and generalize such a rigidly
structured API. I am quite pleased with this new design as the current
<a href="http://www.quantisan.com/jfutil-an-open-source-jforex-utilities-library/">JFUtil opens up a lot of design flexibility</a>. Such as
dynamic indicator selection with genetic algorithm and interchangeable
indicators use for runtime adaptive algorithms.</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/conjuring-beans-to-simplify-jforex-iindicators/' title='2011-03-22T07:35:00'>22 March 2011</a> in <a href="http://www.quantisan.com/category/algorithmic-trading/">algorithmic-trading</a>.              
            </div>
        </article>
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/today-is-day-1-of-quantisan-the-company/" rel='bookmark'>Today is day 1 of Quantisan, the company</a>
            </h1>
            <div class="article-content"> <p>
> The reasonable man adapts himself to the world: the unreasonable one
> persists in trying to adapt the world to himself. Therefore all
> progress depends on the unreasonable man. G. B. Shaw, *Maxims for
> Revolutionists*

While cramming for the CFA level 1 exam the past 3 weeks, I can't let go
of the fact that I'm leaving my work out cold on the table. This sense
of urgency feels like every minute that I delay my trading system
development projects, bits of them will fall apart. This weekend I
finished reading through my Schweser study notes from cover to cover, to
cover to cover, and repeat that 3 more times for a total of 5 books.
It's certainly useful and interesting material. But I can't see the
value of cramming for 3 more months to memorize everything in even more
excruciating detail. No term will be without a definition in my head and
no problem will be without a solution on my BA II Plus calculator. Just
so I can say that I passed my level 1 exam on my resume. What the
curriculum offers is information, but what we need more in this world is
wisdom. I stand by my belief that [credibility is as important as
experience and skills][]. However, that doesn't mean that I need to head
for the path most traveled. Why can't I be unreasonable and push my
limit to do what I've always been set out to do. Credibility can be
gained from attaching professional designations to your name, but it can
also be gained from simply achieving results in the real world. So this
morning, before going to work, I took the first baby step in turning
this little hobby of mine into a real business. I registered a business
entity with our government. After 10 years of [trading][], 5 years
[blogging about the market][], and 3 years in [trading system
development][], today is day 1 of Quantisan Systems! And this -- is how
my business got officially started. My plan towards [unreasonable
goals][] in a world of reasons is finally set in motion.

</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/today-is-day-1-of-quantisan-the-company/' title='2011-03-14T14:34:00'>14 March 2011</a> in <a href="http://www.quantisan.com/category/journal/">journal</a>.              
            </div>
        </article>
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/jfutil-20-alpha-demonstration/" rel='bookmark'>JFUtil 2.0 alpha demonstration</a>
            </h1>
            <div class="article-content"> <p>Rather than talk about how much better JFUtil 2.0 is and all, I'll just
show you a demonstration strategy illustrating the features of this
JForex utilities library. Download <a href="http://www.quantisan.com/jfutil-an-open-source-jforex-utilities-library/">the latest JFUtil from the project
page</a>. As this is an alpha release, I need your help in finding bugs
and look for improvements. Leave me a message <a href="#respond">if you have any comment
or suggestion please</a>. It's best if you copy and paste the following
demo strategy source code into your IDE or text editor for viewing.
<!--more--> [java] import java.util.*; import com.dukascopy.api.*;
import com.quantisan.JFUtil.*; @Library("JFQuantisan.jar") // place
this file in your ../JForex/Strategy/files folder public class
jfutilDemo implements IStrategy { private int counter = new
Random().nextInt(100); // notice the lack of fields to manage JForex
objects @Override public void onStart(IContext context) throws
JFException { // ** Essential steps ** // must initialize objects
once and for all JForexContext.setContext(context);
JForexAccount.setAccount(context.getAccount()); Set\&lt;Instrument> set =
new HashSet\&lt;Instrument>(context.getSubscribedInstruments()); set =
context.getSubscribedInstruments(); // get list of subscribed
instruments // subscribe to transitional instruments for currency
conversion calculations Pairer.subscribeTransitionalInstruments(set); //
** End of essential steps ** Printer.println("-- Quantisan.com
JFUtil v2.0 alpha: Usage demo --"); Printer.println(""); } @Override
public void onBar(Instrument instrument, Period period, IBar askBar,
IBar bidBar) throws JFException { if (period != Period.TEN_SECS)
return; // only run every 10 sec. // *** 1. access IContext and
IAccount from anywhere *** Printer.println("Account equity = " +
JForexAccount.getEquity()); // get an EMA indicator value double ema =
JForexContext.getIndicators().ema(instrument, Period.TEN_SECS,
OfferSide.BID, IIndicators.AppliedPrice.MEDIAN_PRICE, 14, 1);
Printer.println(instrument.toString() + " EMA = " + ema); // printing
the EMA value // *** 2. Profit/loss calculation to account currency
before placing your order *** // Demonstrating currency conversion
double risk = 100 * Pairer.convertPipToAccountCurrency(instrument);
String symbol = JForexAccount.getAccountCurrency().getSymbol();
Printer.println(symbol + risk + " risked in for 1,000 units and 100 pips
move in " + instrument.toString()); // ** 3. Simplify order parameters
with order ticket builder *** // Demonstrating trade ordering String
label = instrument.toString().substring(0,2) + ++counter; OrderTicket
mktBuyTicket = new OrderTicket // order ticket .Builder(label, //
setting required ticket info instrument, IEngine.OrderCommand.BUY, 0.1)
.build(); // build ticket Orderer.placeOrder(mktBuyTicket); // placing
order // market buy order with a 100 pips stop and 100 pips target
double stopPrice = JForexContext.getPrice(instrument) - (100 *
instrument.getPipValue()); double targetPrice =
JForexContext.getPrice(instrument) + (100 * instrument.getPipValue());
label = instrument.toString().substring(0,2) + ++counter; OrderTicket
buySpTicket = new OrderTicket .Builder(label, instrument,
IEngine.OrderCommand.BUY, 0.1) .setStopLossPrice(stopPrice) // set stop
price to ticket .setTakeProfitPrice(targetPrice) // set target .build();
// ** 4. Single method to placing orders for all order types and
parameters *** Orderer.placeOrder(buySpTicket); } @Override public
void onAccount(IAccount account) throws JFException {
JForexAccount.setAccount(account); // update IAccount to latest }
@Override public void onStop() throws JFException { for (IOrder order :
Orderer.getOrders()) // close all orders Orderer.close(order); } }
[/java]</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/jfutil-20-alpha-demonstration/' title='2011-03-08T07:30:00'>08 March 2011</a> in <a href="http://www.quantisan.com/category/algorithmic-trading/">algorithmic-trading</a>.              
            </div>
        </article>
        <article class='listed'>
            <h1 class="title">
                <a href="http://www.quantisan.com/just-because-its-math-does-not-mean-its-not-without-its-caveats/" rel='bookmark'>Just because it&#039;s math does not mean it&#039;s not without its caveats</a>
            </h1>
            <div class="article-content"> <p>I am more than half way through my first speed run of the CFA level 1
material. This chapter discusses portfolio management. In particular, I
just read the Markovitz Efficient Frontier. What strikes me most about
this chapter is that these mathematical material are presented so
matter-of-factly. Recalling in chapter 1, Ethics, the idea of prudence
and due diligence was evident. This was exemplified later in the
Financial Statement chapter. Methods of drafting balance sheet, income
statement, and cash flow statement were presented in excrutiating
details before a discussion about ways to analyze them. Just so we can
understand the mechanics of it to spot bias, pitfalls,
misrepresentation, and outright frauds. In fact, a good portion of the
section were reserved for discussing the caveats in financial statement
analysis. As boring as it was to sit through the accounting details,
that was good prudence and good due diligence. Fast forward to this
discussion on Modern Portfolio Theory (MPT), it is simply explained in
the text that expected risk of a portfolio with individual asset
correlations less than 1 will be less than its weighted average risk.
Where are the billboard-sized warnings and neon-red danger signs?
Perhaps <a href="http://en.wikipedia.org/wiki/Modern_portfolio_theory#Criticism">criticisms of MPT</a> will be discussed later or perhaps I
simply missed it with my \~200 pages/day scanning pace (in which case,
just ignore me). But if I don't see a caveat lector on MPT in bold,
underlined, and boxed fonts later, then I am surely going to be very
disappointed. This is a big deal because of the <a href="http://www.quantisan.com/another-volatile-week-and-no-sign-of-the-bull-yet/">historic events of
2008</a>. In which we witnessed the havoc caused by countless funds that
blindedly rely on MPT's validity (i.e. diversification of risks on the
naive basis of constant correlations and normally distributed returns),
and <a href="http://www.ft.com/cms/s/0/77bf5f98-4441-11e0-931d-00144feab49a.html">other risk models</a>, go under. There can be no worse mistake than
underestimating your risk in trading. Let me repeat that, there can be
no worse mistake than underestimating your risk in trading. <em>Careless
use of MPT</em> (not MPT, per se) leads to exactly that. The problem is that
people take these financial theories to heart too much without reading
the fine prints. Just because it is presented in mathematical formulas
does not mean a theory is law. The least the CFA text can do is to
broaden financial prudence from not only dissecting financial statements
but to encompass other important intellectual matter related to the job
too. I am appalled by the fact that thousands of CFA level 1 hopefuls
might actually believe that you can always reduce portfolio risk and
identify an efficient asset mix from mere correlations and standard
deviations (which in and of themselves are flawed in the real world),
with no strings attached. "Science is the belief in the ignorance of the
experts", Richard Feynman.</p> </div>
            <div class="abbr published">
                Posted  <a href='http://www.quantisan.com/just-because-its-math-does-not-mean-its-not-without-its-caveats/' title='2011-03-01T07:21:00'>01 March 2011</a> in <a href="http://www.quantisan.com/category/algorithmic-trading/">algorithmic-trading</a>.              
            </div>
        </article>
<p class="paginator">
		        <a href="http://www.quantisan.com/index8.html" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;newer</a>

                    <a href="http://www.quantisan.com/index10.html" class="button_accent" style="position: absolute; right: 0;">continue&nbsp;&nbsp;&nbsp;&rarr;</a>
</p>
    </section>

<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
		try {
			var pageTracker = _gat._getTracker("UA-2047602-4");
			pageTracker._trackPageview();
		} catch(err) {}</script>
</body>
</html>