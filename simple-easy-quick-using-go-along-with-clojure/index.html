<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="http://www.quantisan.com/theme/css/style.css">
    <link rel="stylesheet" type="text/css" href="http://www.quantisan.com/theme/css/pygments.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300|Inconsolata' rel='stylesheet' type='text/css'>
	<link href="http://www.quantisan.com/" type="application/atom+xml" rel="alternate" title="Quantitative Artisan ATOM Feed" />


        <title>Simple, Easy, Quick: Using Go along with Clojure - Quantitative Artisan</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Paul Lam">
</head>

<body>
    <section id="navbar">
        <div class="user_meta">
            <h1 id="user"><a href="http://www.quantisan.com" class="">Paul Lam</a></h1>
            <h2>Data. Engineering. Startup.</h2>
        </div>
        <div class="nav-button">
            <ul>
                                    <li><a href="http://www.quantisan.com/about/">About</a></li>
                            <li><a href="mailto:paul@quantisan.com">Email</a></li>
                            <li><a href="http://www.twitter.com/Quantisan">Twitter</a></li>
                            <li><a href="http://www.github.com/Quantisan">Github</a></li>
                            <li><a href="http://www.linkedin.com/in/paullam">LinkedIn</a></li>
                            <li><a href="http://feeds.feedburner.com/Quantisan">Subscribe</a></li>
             </ul>
         </div>
     </section>

     <section id="sidebar">
        <img src="/images/profile_circle.png" id="logo" alt="logo">

        <div class="user_meta">
            <h1 id="user"><a href="http://www.quantisan.com" class="">Paul Lam</a></h1>
            <h2>Data. Engineering. Startup.</h2>
            <ul>
                        <li><a href="http://www.quantisan.com/about/">About</a></li>
                        <li><a href="mailto:paul@quantisan.com">Email</a></li>
                        <li><a href="http://www.twitter.com/Quantisan">Twitter</a></li>
                        <li><a href="http://www.github.com/Quantisan">Github</a></li>
                        <li><a href="http://www.linkedin.com/in/paullam">LinkedIn</a></li>
                        <li><a href="http://feeds.feedburner.com/Quantisan">Subscribe</a></li>
            </ul>
        </div>
        <footer>
            <address>
                Powered by <a href='http://docs.getpelican.com/en/latest/'>Pelican</a>,
                <a href='https://github.com/jamescooke/pelican-svbtle#readme'>theme info</a>.
            </address>
        </footer>
    </section>

    <section id="posts">
<article>
    <h1 class="title">
        <a href="http://www.quantisan.com/simple-easy-quick-using-go-along-with-clojure/" rel="bookmark">Simple, Easy, Quick: Using Go along with Clojure</a>
    </h1>

    <div class='article-content'>
        <p>We had questions about how Go compares with Clojure at the Boston Clojure Meetup this week. My default answer to any technology this-vs-that debate is -- <em>it depends</em>. But it just so happens that our backend system at Glassy Media consist of an even split of services written between Go and Clojure. However, this isn't due to any technical reasoning. Using the two languages together feels right to our particular needs.</p>
<p>Rich Hickey made clear the distinction between simple and easy in his famous talk, <a href="http://www.infoq.com/presentations/Simple-Made-Easy">Simple Made Easy</a>. Clojure made simple easy. But sometimes I don't want simple and easy. I want quick and easy. That is exactly where Go can complement Clojure.</p>
<p><img alt="Simple, Easy, Quick" src="http://www.quantisan.com/images/2014/simple_easy_quick_triangle.png" /></p>
<p>How Clojure made simple easy has been a path well beaten. The rest of this post is why I think Go is quick and easy.</p>
<h2>Our Path To Go</h2>
<p>Once upon a time (i.e. a few months ago) our backend cogs and gears consisted of a bunch of command line programs that we would run on our laptop every now and then to churn our data. We distributed those tools to our non-developer helpers to serve our clients. Those command line tools started out in Python or Node.js. But distributing, maintaining, and updating those programs to other people's laptops eventually became a real pain. So one weekend I rewrote one of our command line programs in Go. On Monday I shared a link to a single executable file on Dropbox and people were able to run it directly from there. No more asking people to go on command line and typing <code>pip install</code> or <code>npm install</code>. That was how we started using Go at Glassy Media.</p>
<p>I had no prior experience with Go before that. The fact that I was able to learn the language and then produce something useful over a weekend doesn't have to do with me. It is the practicality of the language, clear documentation, and smart tooling that makes Go easy to ramp up.</p>
<h3>Language Practicality</h3>
<p>Take the <code>for</code> loop as an example, you can iterate over a map like so. (code sample taken from <a href="http://golang.org/doc/effective_go.html#for">Effective Go</a>)</p>
<div class="highlight"><pre><span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">oldMap</span> <span class="p">{</span>
    <span class="nx">newMap</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="p">=</span> <span class="nx">value</span>
<span class="p">}</span>
</pre></div>


<p>The same <code>range</code> can be used to iterate over an array:</p>
<div class="highlight"><pre><span class="nx">sum</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">value</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">array</span> <span class="p">{</span>
    <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">value</span>
<span class="p">}</span>
</pre></div>


<p>No need for additional syntax to do the same thing. And there're no <code>while</code> or <code>do</code> loops too. There is only <code>for</code> to do all of that as shown.</p>
<div class="highlight"><pre><span class="c1">// complete `for` struct</span>
<span class="k">for</span> <span class="nx">init</span><span class="p">;</span> <span class="nx">condition</span><span class="p">;</span> <span class="nx">post</span> <span class="p">{</span> <span class="p">}</span>

<span class="c1">// only check condition like a `while`</span>
<span class="k">for</span> <span class="nx">condition</span> <span class="p">{</span> <span class="p">}</span>

<span class="c1">// or, nothing like a `do`</span>
<span class="k">for</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>


<p>The Go core syntax is consistently minimal like so.</p>
<h3>Clear Documentation</h3>
<p>From <a href="http://blog.golang.org/godoc-documenting-go-code">The Go Programming Language</a>,</p>
<div class="highlight"><pre> <span class="n">The</span> <span class="n">Go</span> <span class="n">project</span> <span class="n">takes</span> <span class="n">documentation</span> <span class="n">seriously</span><span class="p">.</span> <span class="n">Documentation</span> <span class="n">is</span> <span class="n">a</span> <span class="n">huge</span> <span class="n">part</span>
 <span class="n">of</span> <span class="n">making</span> <span class="n">software</span> <span class="n">accessible</span> <span class="n">and</span> <span class="n">maintainable</span><span class="p">.</span> <span class="n">Of</span> <span class="n">course</span> <span class="n">it</span> <span class="n">must</span> <span class="n">be</span>
 <span class="n">well</span><span class="o">-</span><span class="n">written</span> <span class="n">and</span> <span class="n">accurate</span><span class="p">,</span> <span class="n">but</span> <span class="n">it</span> <span class="n">also</span> <span class="n">must</span> <span class="n">be</span> <span class="n">easy</span> <span class="n">to</span> <span class="n">write</span> <span class="n">and</span> <span class="n">to</span>
 <span class="n">maintain</span><span class="p">.</span> <span class="n">Ideally</span><span class="p">,</span> <span class="n">it</span> <span class="n">should</span> <span class="n">be</span> <span class="n">coupled</span> <span class="n">to</span> <span class="n">the</span> <span class="n">code</span> <span class="n">itself</span> <span class="n">so</span> <span class="n">the</span>
 <span class="n">documentation</span> <span class="n">evolves</span> <span class="n">along</span> <span class="n">with</span> <span class="n">the</span> <span class="n">code</span><span class="p">.</span> <span class="n">The</span> <span class="n">easier</span> <span class="n">it</span> <span class="n">is</span> <span class="k">for</span>
 <span class="n">programmers</span> <span class="n">to</span> <span class="n">produce</span> <span class="n">good</span> <span class="n">documentation</span><span class="p">,</span> <span class="n">the</span> <span class="n">better</span> <span class="k">for</span> <span class="n">everyone</span><span class="p">.</span>
</pre></div>


<p>Go's source code documentation has simple convention and automatic publishing. Take our trivial <a href="https://github.com/GlassyMedia/go-arrays">go-arrays library for manipulating arrays</a>. Here is one of the functions and its docstring.</p>
<div class="highlight"><pre><span class="c1">// Contains check if &#39;s&#39; is in &#39;coll&#39; string array</span>
<span class="kd">func</span> <span class="nx">Contains</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">coll</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>


<p>What's amazing is that a corresponding project documentation page is automatically scraped from our source code and hosted on GoDoc.org with no extra work needed on our part. So as soon as you pushed a project onto Github, you can request your project documentation on GoDoc.org website. Here is a screenshot of one.</p>
<p><img alt="Godoc.org for go-arrays" src="http://www.quantisan.com/images/2014/godoc_screen.png" /></p>
<p>Because software documentation is baked into the process, I find most of the Go libraries are less frustrating to pickup.</p>
<h3>Smart Tooling</h3>
<p>I don't know why GoFmt isn't more common in programming. GoFmt is a tool that automatically <a href="http://golang.org/cmd/gofmt/">formats Go source code</a>. It is like <code>jshint</code> or <code>pyflakes</code> but goes an extra step further and actually fixes your code styling for you too. No more <code>gg=G</code> in Vim.</p>
<p>Consistent source code styling makes life so much easier when digging into other people's projects.</p>
<p>Overall, I enjoy the workflow developing in Go. There is no interactive REPL. What you get is an almost instant <code>go test</code> and <code>go run</code> execution time. Coming from doing everything in Vim, switching between my editor and the command line isn't as annoying as I would have thought.</p>
<p>One reason for that is because the workflow is different when developing in Go. GoFmt is integrated in Vim (and other typical editors); along with the fact that Go is statically typed, by the time when your code saves without error, most of the time it would work as expected. So it's not that often when I need to resort to doing <code>go test</code> to check my code.</p>
<h3>Go for Web Services</h3>
<p>Having had Go in production for only a few months, our experience with Go is limited. Still, what stands out the most with Go is using it to build web services. Take our SMTP callback verification service, for example. The HTTP server code for it is <a href="https://github.com/GlassyMedia/smtp-callback-verification/blob/master/web.go">under 50 lines</a> using <a href="https://github.com/ant0ine/go-json-rest">go-json-rest</a> and a couple core packages. Not only that, Go has <a href="https://github.com/GlassyMedia/smtp-callback-verification/blob/master/web_test.go">mock HTTP server testing functionality built right in</a>.</p>
<p>I am aware that this is subjective. But having used a handful of languages and frameworks to build RESTful web services, Go is by far the easiest to get a server up and running.</p>
<h2>Complementing Clojure with Go</h2>
<p>The one time when I had to choose between Go vs. Clojure was when the Boston Go Meetup happened on the same night as the Boston Clojure Meetup.</p>
<blockquote class="twitter-tweet" lang="en"><p>.<a href="https://twitter.com/BostonGolang">@bostongolang</a> hmm... didn&#39;t think I&#39;ll have to take side Clojure vs. Go so soon</p>&mdash; Paul Lam (@quantisan) <a href="https://twitter.com/quantisan/statuses/446389305972621312">March 19, 2014</a></blockquote>

<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>Otherwise, there is no reason that Go and Clojure can't work along each other as part of a suite of toolset.</p>
<p>Everyone has their tools of choice. Your taste and circumstance are probably different than mine. What matters is that the tools in your toolbox as a whole fit the problems that you face. Go and Clojure fill different needs for us.</p>
    </div>

    <div class='post-footer'>
        <div class='share-footer'>
            <div id='dated' class="abbr published" title='2014-05-12T00:00:00'>
                Posted 12 May 2014
            </div>

<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_pinterest_pinit"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=quantisan"></script>
<!-- AddThis Button END -->
 
        </div>

        <div id="article_meta">
            Category:
            <a href="http://www.quantisan.com/category/computing/">computing</a>
            <br />Tags:
            <a href="http://www.quantisan.com/tag/golang/">golang</a>
            <a href="http://www.quantisan.com/tag/clojure/">clojure</a>
        </div>

        <div class='related-posts'>
            <h2>Related Posts:</h2>

            <ul>
                <li><a href="http://www.quantisan.com/more-problem-solving-less-solution-glorifying/">More problem solving, less solution glorifying</a></li>
                <li><a href="http://www.quantisan.com/vector-algorithm-using-tree-composition/">Vector algorithm using tree composition</a></li>
                <li><a href="http://www.quantisan.com/algorithmic-ownage/">Algorithmic ownage</a></li>
                <li><a href="http://www.quantisan.com/a-hypothetical-data-analysis-platform/">A hypothetical data analysis platform</a></li>
                <li><a href="http://www.quantisan.com/my-5-minute-lightning-talk-on-cascalog/">My 5 minute lightning talk on Cascalog</a></li>
            </ul>            
        </div>

    </div>
</article>

<footer>
    <a href="http://www.quantisan.com/" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;Back to blog</a>
</footer>

<div id="comments">
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
    var disqus_identifier = "simple-easy-quick-using-go-along-with-clojure/";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://quantisan-blog.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view <a href="http://disqus.com/?ref_noscript">comments</a>.</noscript>
</div>
    </section>

<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
		try {
			var pageTracker = _gat._getTracker("UA-2047602-4");
			pageTracker._trackPageview();
		} catch(err) {}</script>
</body>
</html>